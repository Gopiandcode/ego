<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>EGraph (ego.Ego.Basic.EGraph)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">ego</a> &#x00BB; <a href="../../index.html">Ego</a> &#x00BB; <a href="../index.html">Basic</a> &#x00BB; EGraph</nav><h1>Module <code>Basic.EGraph</code></h1></header><aside><p>This module defines the main interface to the EGraph provided by <a href="../index.html"><code>Ego.Basic</code></a>.</p></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Represents a syntactic-rewrite-only EGraph that operates over Sexps.</p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <span>?&#8288;pp_id:<span>(Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="../../Id/index.html#type-t">Id.t</a> <span>&#45;&gt;</span> unit)</span></span> <span>&#45;&gt;</span> Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp ?pp_id fmt graph</code> prints an internal representation of the <code>graph</code>.</p><p><b>Note</b>: This is primarily intended for debugging, and the output format is not guaranteed to remain consistent over versions.</p></dd></dl><dl><dt class="spec value" id="val-pp_dot"><a href="#val-pp_dot" class="anchor"></a><code><span class="keyword">val</span> pp_dot : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp_dot fmt graph</code> pretty prints <code>graph</code> in a Graphviz format.</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>init ()</code> creates a new EGraph.</p></dd></dl><dl><dt class="spec value" id="val-add_sexp"><a href="#val-add_sexp" class="anchor"></a><code><span class="keyword">val</span> add_sexp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Sexplib0.Sexp.t <span>&#45;&gt;</span> <a href="../../Id/index.html#type-t">Id.t</a></code></dt><dd><p><code>add_sexp graph sexp</code> adds <code>sexp</code> to <code>graph</code> and returns the equivalence class associated with term.</p></dd></dl><dl><dt class="spec value" id="val-to_dot"><a href="#val-to_dot" class="anchor"></a><code><span class="keyword">val</span> to_dot : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Odot.graph</code></dt><dd><p><code>to_dot graph</code> converts <code>graph</code> into a Graphviz representation.</p></dd></dl><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Id/index.html#type-t">Id.t</a> <span>&#45;&gt;</span> <a href="../../Id/index.html#type-t">Id.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>merge graph id1 id2</code> merges the equivalence classes associated with <code>id1</code> and <code>id2</code>.</p><p><b>Note</b>: If you call <a href="index.html#val-merge"><code>merge</code></a> manually, you must call <a href="index.html#val-rebuild"><code>rebuild</code></a> before running any queries or extraction.</p></dd></dl><dl><dt class="spec value" id="val-rebuild"><a href="#val-rebuild" class="anchor"></a><code><span class="keyword">val</span> rebuild : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>rebuild graph</code> restores the internal invariants of the EGraph <code>graph</code>.</p><p><b>Note</b>: If you call <a href="index.html#val-merge"><code>merge</code></a> manually, you must call <a href="index.html#val-rebuild"><code>rebuild</code></a> before running any queries or extraction.</p></dd></dl><dl><dt class="spec value" id="val-extract"><a href="#val-extract" class="anchor"></a><code><span class="keyword">val</span> extract : <span>(<span>(<a href="../../Id/index.html#type-t">Id.t</a> <span>&#45;&gt;</span> float)</span> <span>&#45;&gt;</span> <span>(<a href="../Symbol/index.html#type-t">Symbol.t</a> * <span><a href="../../Id/index.html#type-t">Id.t</a> list</span>)</span> <span>&#45;&gt;</span> float)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Id/index.html#type-t">Id.t</a> <span>&#45;&gt;</span> Sexplib0.Sexp.t</code></dt><dd><p><code>extract cost_fn graph</code> computes an extraction function <code>Id.t
        -&gt; Sexplib0.Sexp.t</code> to extract terms (specified by <code>Id.t</code>) from the EGraph.</p><p><code>cost_fn f (sym,children)</code> should assign costs to the node with tag <code>sym</code> and children <code>children</code> - it can use <code>f</code> to determine the cost of a child.</p></dd></dl><dl><dt class="spec value" id="val-apply_rules"><a href="#val-apply_rules" class="anchor"></a><code><span class="keyword">val</span> apply_rules : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../Rule/index.html#type-t">Rule.t</a> list</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>apply_rules graph rules</code> runs each of the rewrites in <code>rules</code> exactly once over the egraph <code>graph</code> and then returns.</p></dd></dl><dl><dt class="spec value" id="val-run_until_saturation"><a href="#val-run_until_saturation" class="anchor"></a><code><span class="keyword">val</span> run_until_saturation : <span>?&#8288;fuel:int</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../Rule/index.html#type-t">Rule.t</a> list</span> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>run_until_saturation ?fuel graph rules</code> repeatedly each one of the rewrites in <code>rules</code> until no further changes occur (<i>i.e equality saturation</i>), or until it runs out of <code>fuel</code>.</p><p>It returns a boolean indicating whether it reached equality saturation or had to terminate early.</p></dd></dl></div></body></html>